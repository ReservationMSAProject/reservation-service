# 코드 리뷰 가이드라인

## 언어 및 커뮤니케이션
- 모든 리뷰 코멘트는 **한국어**로 작성해 주세요
- 정중하고 건설적인 톤으로 피드백을 제공해 주세요
- 문제점을 지적할 때는 개선 방안도 함께 제시해 주세요
- 코드 예시를 포함하여 구체적인 개선안을 제시해 주세요

## 리뷰 우선순위 (중요도 순)

### 1. 보안 및 취약점 🚨
- SQL 인젝션, XSS, CSRF 등 보안 취약점 체크
- 민감한 정보 하드코딩 여부 확인 (DB 패스워드, API 키 등)
- Spring Security 설정 검토
- 권한 검증 로직 검토
- 입력값 검증 및 sanitization 확인

### 2. 성능 및 효율성 ⚠️
- N+1 쿼리 문제 확인
- 불필요한 반복문이나 중복 연산 체크
- 메모리 누수 가능성 검토
- JPA/Hibernate 쿼리 최적화
- 캐시 전략 적절성 확인
- 트랜잭션 범위 최적화

### 3. 아키텍처 및 설계 💡
- Spring MVC 패턴 준수 여부
- 계층별 책임 분리 (Controller, Service, Repository)
- 의존성 주입 패턴 적절성
- SOLID 원칙 준수
- 단일 책임 원칙 확인

### 4. 코드 품질 🎨
- 적절한 네이밍 컨벤션 사용
- 코드 가독성 및 유지보수성
- 주석 작성 가이드라인 준수
- 매직 넘버/문자열 상수화


### Java 코딩 컨벤션
- 변수명, 메서드명: camelCase 사용
- 클래스명: PascalCase 사용
- 상수: UPPER_SNAKE_CASE 사용
- 패키지명: 소문자, 점(.) 구분
- 들여쓰기: 스페이스 4칸 사용

  
### JPA/Hibernate 가이드라인

#### Entity 설계
- `@Entity` 클래스에는 기본 생성자 필수
- `@Id` 필드는 `Long` 타입 권장
- 연관관계는 `@JoinColumn`으로 명시적 지정
- `@ToString`에서 연관관계 필드 제외 (`@ToString.Exclude`)
- 즉시 로딩(`EAGER`) 대신 지연 로딩(`LAZY`) 사용

#### 쿼리 최적화
- `@Query`로 명시적 JPQL 작성 권장
- `@EntityGraph`를 활용한 N+1 문제 해결
- 페이징 처리 시 `Pageable` 사용
- 복잡한 쿼리는 QueryDSL 고려


## 코드 리뷰 체크리스트

### Spring 특화 체크사항
- [ ] **Controller**: HTTP 상태 코드가 적절한가?
- [ ] **Service**: 트랜잭션 어노테이션이 적절한가?
- [ ] **Repository**: 쿼리 메서드명이 Spring Data JPA 규칙을 따르는가?
- [ ] **Entity**: 연관관계 매핑이 올바른가?
- [ ] **DTO**: 불필요한 필드가 노출되지 않는가?
- [ ] **Security**: 인증/인가 처리가 적절한가?
- [ ] **Validation**: `@Valid`, `@Validated` 사용이 적절한가?
- [ ] **Logging**: 적절한 로그 레벨과 메시지인가?

### 일반 체크사항
- [ ] 코드가 요구사항을 충족하는가?
- [ ] 보안 취약점이 없는가?
- [ ] 성능상 문제가 없는가?
- [ ] 테스트 케이스가 충분한가?
- [ ] 에러 처리가 적절한가?
- [ ] 코드 가독성이 좋은가?
- [ ] 주석이 필요한 부분에 작성되었는가?
- [ ] 네이밍이 명확하고 일관적인가?

## 피드백 스타일 가이드

### 중요도 표시
- 🚨 **치명적**: 보안 취약점, 런타임 에러 가능성
- ⚠️ **중요**: 성능 이슈, 설계 문제, N+1 쿼리
- 💡 **제안**: 개선사항, 리팩토링 제안
- 🎨 **스타일**: 코딩 컨벤션, 네이밍

### 피드백 템플릿

🚨 보안 이슈: [문제점 설명]

문제가 되는 이유: [이유 설명]

개선 방안:
[개선된 코드 예시]

참고: [관련 문서나 베스트 프랙티스 링크]

text

#### 개선 제안 시
💡 개선 제안: [제안 내용]

현재 코드의 문제점: [문제점 설명]

개선 후 장점:

가독성 향상

성능 개선

유지보수성 증대

제안하는 코드:
[개선된 코드 예시]


#### 긍정적 피드백
👍 잘 작성된 코드입니다!

계층별 책임이 명확히 분리되어 있습니다

적절한 예외 처리로 안정성이 보장됩니다

테스트 케이스가 충분히 작성되어 있습니다

Spring 베스트 프랙티스를 잘 따르고 있습니다


## 프로젝트 특화 금지사항

### 절대 금지
- `System.out.println()` 사용 (로깅 프레임워크 사용)
- 하드코딩된 값 (properties 파일 사용)
- `@Autowired` 필드 주입 (생성자 주입 사용)
- 트랜잭션 없는 데이터 변경 작업
- 패스워드 평문 저장
- `var` 키워드 사용 금지 (명시적 타입 선언)

### 지양사항
- `@Repository` 어노테이션 없는 Repository 구현체
- 과도한 메서드 체이닝
- 매직 넘버/문자열 사용
- catch 블록에서 예외 무시
- 깊은 중첩 구조 (3단계 이상)
- 과도하게 긴 메서드 (30줄 이상)

## 자동 체크 요청사항

다음 패턴을 발견하면 자동으로 지적해 주세요:

### Spring 관련
- `@Transactional` 누락된 데이터 변경 메서드
- N+1 쿼리 발생 가능성
- LazyInitializationException 가능성
- `@RequestBody` 없는 POST/PUT 메서드
- 응답 DTO에 Entity 직접 반환
- 순환 참조 가능성

### 일반 사항
- TODO, FIXME 주석이 있는 경우
- 사용하지 않는 import나 변수
- 매직 넘버/문자열
- catch 블록에서 예외 처리 누락
- `console.log` 대신 proper logging 사용
- 하드코딩된 URL이나 설정값 사용
